{% extends 'ng_learn/base.html' %}


{% block content %}
{% for group in groups|dictsort:"groupstart" %}
<li><a href="{{group.get_absolute_url}}"> {{ group.groupname }}>>{{ group.groupstart }}</a></li>
{% endfor  %}
<br>


Название: {{ object.groupname }}
<br>
Начало: {{ object.groupstart }}
<br>
Цена: {{ object.price }}
<br>
задолженность группы {{ count }}
<br>

ID: {{ object.id }}

<form action="{% url 'delete-group' group.pk %}" method="post">
    {% csrf_token %}
    <input type="submit" value="delete"/>
</form>

<h1>Список студентов:</h1>
<table class="table table-hover">
    <tr>
        <th>фио</th>
        <th>телефон</th>
        <th>email</th>
        <th>предоплата</th>
        <th>инф. письмо</th>
        <th>баланс</th>
        <th>осталось оплатить</th>
    </tr>

    {% for student in object.students.all %}

    <tr>
        <td>{{student.name}}</td>
        <td>{{student.tel}}</td>
        <td>{{student.email}}</td>
        <td><input type="checkbox" {% if student.predpay %} checked {% endif %}/></td>
        <td><input type="checkbox" {% if student.infomail %} checked {% endif %}/></td>
        <td>{{student.balance}}</td>
        <td>{{ student.get_debt }}</td>
        <td><a href="{{ student.get_absolute_url }}">edit</a></td>
        <td>
            <form action="{% url 'delete-student' student.pk %}" method="post">
                {% csrf_token %}
                <input type="submit" value="delete"/>
            </form>
        </td>
    </tr>


    {% endfor %}
</table>

<hr>

<form action="{% url 'add-student' object.id %}" method="post">
    {% csrf_token %}

    {{ form.as_p }}
    <input type="submit" value="+ student">
</form>


{% endblock %}
